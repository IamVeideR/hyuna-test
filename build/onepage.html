<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>hyuna-test</title>
    <style>
      html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font: inherit;
  vertical-align: baseline; }

/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure,
footer, header, hgroup, menu, nav, section {
  display: block; }

ol, ul {
  list-style: none; }

input[type="checkbox"], input[type="radio"] {
  cursor: pointer; }

a {
  text-decoration: none;
  cursor: pointer; }

blockquote, q {
  quotes: none; }

blockquote:before, blockquote:after,
q:before, q:after {
  content: '';
  content: none; }

table {
  border-collapse: collapse;
  border-spacing: 0; }

button {
  border: none;
  background-color: transparent;
  padding: 0;
  cursor: pointer; }

button:focus, div:focus, input, textarea, video {
  outline: 0; }

input, textarea {
  border: none;
  resize: none; }

body * {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  outline: none; }

.container {
  margin: 0 auto;
  max-width: 1160px;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  width: 100%;
  -webkit-box-sizing: border-box;
          box-sizing: border-box; }

@media (max-width: 1200px) {
  .container {
    padding-right: 15px;
    padding-left: 15px; } }

@media (max-width: 560px) {
  .container {
    padding-right: 5px;
    padding-left: 5px; } }

.container {
  padding-top: 5vh;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-justify-content: space-around;
      -ms-flex-pack: distribute;
          justify-content: space-around;
  -webkit-flex-wrap: wrap;
      -ms-flex-wrap: wrap;
          flex-wrap: wrap; }

body {
  font-family: Tahoma, sans-serif; }

[v-cloak] {
  display: none; }

h2 {
  text-transform: uppercase;
  text-align: center;
  padding-bottom: 15px;
  font-style: 14px;
  font-weight: bold;
  width: 100%;
  height: 34px;
  -webkit-box-sizing: border-box;
          box-sizing: border-box; }

input, select {
  border: 1px solid #777777;
  padding: 10px;
  margin-bottom: 10px;
  width: 190px;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  height: 38px; }

.currency {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-flex-wrap: wrap;
      -ms-flex-wrap: wrap;
          flex-wrap: wrap;
  padding-bottom: 20px;
  -webkit-box-align: start;
  -webkit-align-items: flex-start;
      -ms-flex-align: start;
          align-items: flex-start; }

.converter {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-flex-wrap: wrap;
      -ms-flex-wrap: wrap;
          flex-wrap: wrap;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
      -ms-flex-pack: center;
          justify-content: center;
  padding-bottom: 20px;
  -webkit-box-align: start;
  -webkit-align-items: flex-start;
      -ms-flex-align: start;
          align-items: flex-start; }
  .converter__first {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
        -ms-flex-direction: column;
            flex-direction: column; }
  .converter__second {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
        -ms-flex-direction: column;
            flex-direction: column; }
  .converter__change {
    margin: 10px;
    cursor: pointer;
    color: black;
    font-size: 14px;
    width: 16px;
    height: 16px; }
    .converter__change svg {
      fill: #777777;
      -webkit-transition-duration: 0.2s;
           -o-transition-duration: 0.2s;
              transition-duration: 0.2s; }
    .converter__change:hover svg {
      fill: #aaaaaa; }

@media (max-width: 480px) {
  .container {
    -webkit-box-pack: center;
    -webkit-justify-content: center;
        -ms-flex-pack: center;
            justify-content: center;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
        -ms-flex-direction: column;
            flex-direction: column; }
  .currency {
    -webkit-box-align: center;
    -webkit-align-items: center;
        -ms-flex-align: center;
            align-items: center; }
  .converter {
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
        -ms-flex-direction: column;
            flex-direction: column;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
        -ms-flex-pack: center;
            justify-content: center;
    -webkit-box-align: center;
    -webkit-align-items: center;
        -ms-flex-align: center;
            align-items: center; } }

    </style>
  </head>
  <body>
    <div class="container">
      <div class="currency" id="cur">
        <h2 class="currency__title">Валюта</h2>
        <select class="currency__name" v-model="selectedCurrency" name="currency" v-on:change="changeCurrency">
          <option v-cloak>---</option>
          <option v-cloak v-for="(currency, index) in currencies" v-bind:key="index" v-bind:value="index">{{currency.txt}}</option>
        </select>
        <input class="currency__date" type="date" v-model="todaysDate" v-on:change="changeDate">
        <h2 class="currency__value" v-cloak v-if="selectedCurrency!==null">{{todaysRate}} UAH</h2>
      </div>
      <div class="converter" id="con">
        <h2 class="converter__title">Конвертер валют</h2>
        <div class="converter__first"> 
          <select class="first__name" v-model="selectedCurrencyFirst" name="currency" v-on:change="changeCurrencyFirst">
            <option v-cloak>---</option>
            <option v-cloak>Українська гривня</option>
            <option v-cloak v-for="(currency, index) in currenciesFirst" v-bind:key="index" v-bind:value="index">{{currency.txt}}</option>
          </select>
          <input class="first__value" type="text" value="1" v-model="firstValue" v-on:input="makeCalculations">
        </div>
        <div class="converter__change" v-on:click="reverseCurrency">
          <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 511.624 511.623" style="enable-background:new 0 0 511.624 511.623;" xml:space="preserve">
            <path d="M9.135,200.996h392.862v54.818c0,2.475,0.9,4.613,2.707,6.424c1.811,1.81,3.953,2.713,6.427,2.713 c2.666,0,4.856-0.855,6.563-2.569l91.365-91.362c1.707-1.713,2.563-3.903,2.563-6.565c0-2.667-0.856-4.858-2.57-6.567 l-91.07-91.078c-2.286-1.906-4.572-2.856-6.858-2.856c-2.662,0-4.853,0.856-6.563,2.568c-1.711,1.715-2.566,3.901-2.566,6.567 v54.818H9.135c-2.474,0-4.615,0.903-6.423,2.712S0,134.568,0,137.042v54.818c0,2.474,0.903,4.615,2.712,6.423 S6.661,200.996,9.135,200.996z"></path>
            <path d="M502.49,310.637H109.632v-54.82c0-2.474-0.905-4.615-2.712-6.423c-1.809-1.809-3.951-2.712-6.424-2.712 c-2.667,0-4.854,0.856-6.567,2.568L2.568,340.607C0.859,342.325,0,344.509,0,347.179c0,2.471,0.855,4.568,2.568,6.275 l91.077,91.365c2.285,1.902,4.569,2.851,6.854,2.851c2.473,0,4.615-0.903,6.423-2.707c1.807-1.813,2.712-3.949,2.712-6.427V383.72	H502.49c2.478,0,4.613-0.899,6.427-2.71c1.807-1.811,2.707-3.949,2.707-6.427v-54.816c0-2.475-0.903-4.613-2.707-6.42 C507.103,311.54,504.967,310.637,502.49,310.637z"></path>
          </svg>
        </div>
        <div class="converter__second">
          <select class="second__name" v-model="selectedCurrencySecond" name="currency" v-on:change="changeCurrencySecond">
            <option v-cloak>---</option>
            <option v-cloak>Українська гривня</option>
            <option v-cloak v-for="(currency, index) in currenciesSecond" v-bind:key="index" v-bind:value="index">{{currency.txt}}</option>
          </select>
          <input class="second__value" type="text" v-model="secondValue" readonly>
        </div>
        <h2></h2>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
      let currentDate = new Date().toISOString().substr(0, 10);
let currencyDate = currentDate.match(/\d/g);
currencyDate = currencyDate.join("");
let currentCurrencies = [];

let requestURL = `https://bank.gov.ua/NBUStatService/v1/statdirectory/exchange?date=${currencyDate}&json`;
let request = new XMLHttpRequest();
request.open('GET', requestURL);
request.responseType = 'json';
request.send();
request.onload = function() {
    currentCurrencies = request.response;  

    let cur = new Vue({
        el: '#cur',
        data: {
            currencies: currentCurrencies,
            selectedCurrency: '---',
            todaysDate: currentDate,
            todaysRate: null,
        },
        methods: {
            changeDate: function () {
                currentDate = document.querySelector('.currency__date').value;
                let currencyDate = currentDate.match(/\d/g);
                currencyDate = currencyDate.join("");
                let curRequestURL = `https://bank.gov.ua/NBUStatService/v1/statdirectory/exchange?date=${currencyDate}&json`;
                let curRequest = new XMLHttpRequest();
                curRequest.open('GET', curRequestURL);
                curRequest.responseType = 'json';
                curRequest.send();
                curRequest.onload = function() {
                    cur.currencies = curRequest.response; 
                    cur.todaysRate = cur.currencies[cur.selectedCurrency].rate;
                }               
            },
            changeCurrency: function () {
                if (cur.selectedCurrency == '---') {
                    cur.todaysRate = '';
                }
                else {
                    cur.todaysRate = cur.currencies[cur.selectedCurrency].rate;
                }
            }
        },
    })
    document.querySelector('.currency__date').value = currentDate;

    let con = new Vue({
        el: '#con',
        data: {
            currenciesFirst: currentCurrencies,
            currenciesSecond: currentCurrencies,
            selectedCurrencyFirst: '---',
            selectedCurrencySecond: '---',
            rateFirst: null,
            rateSecond: null,
            firstValue: 1,
            secondValue: null,
        },
        methods: {
            changeCurrencyFirst: function () {
                if (con.selectedCurrencyFirst == '---' || con.selectedCurrencyFirst == 'Українська гривня') {
                    con.rateFirst = 1;
                } else {
                    con.rateFirst = con.currenciesFirst[con.selectedCurrencyFirst].rate;
                }
                con.makeCalculations();
            },
            changeCurrencySecond: function () {
                if (con.selectedCurrencySecond == '---' || con.selectedCurrencySecond == 'Українська гривня') {
                    con.rateSecond = 1;
                }
                else {
                    con.rateSecond = con.currenciesSecond[con.selectedCurrencySecond].rate;
                }
                con.makeCalculations();
            },
            makeCalculations: function () {
                if (con.selectedCurrencyFirst!='---' && con.selectedCurrencySecond!='---') {
                    con.secondValue =  Math.floor(con.firstValue*con.rateFirst/con.rateSecond * 10**6) / 10**6;
                }
            },
            reverseCurrency: function () {
                let selectedCurrencyThird = con.selectedCurrencyFirst;
                con.selectedCurrencyFirst = con.selectedCurrencySecond;
                con.selectedCurrencySecond = selectedCurrencyThird;
                let rateThird = con.rateFirst;
                con.rateFirst = con.rateSecond;
                con.rateSecond = rateThird;
                con.makeCalculations();
            }
        },
    })
}
    </script>
  </body>
</html>